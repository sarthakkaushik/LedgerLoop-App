{
  "household_expenses": {
    "description": "Pre-scoped household analytics view used by the SQL agent.",
    "columns": [
      {"name": "expense_id", "type": "text", "nullable": false},
      {"name": "household_id", "type": "text", "nullable": false},
      {"name": "logged_by_user_id", "type": "text", "nullable": false},
      {"name": "logged_by", "type": "text", "nullable": false},
      {"name": "attributed_family_member_id", "type": "text", "nullable": true},
      {"name": "attributed_family_member", "type": "text", "nullable": false},
      {"name": "attributed_member_type", "type": "text", "nullable": true},
      {"name": "status", "type": "text", "nullable": false},
      {"name": "category", "type": "text", "nullable": false},
      {"name": "subcategory", "type": "text", "nullable": true},
      {"name": "description", "type": "text", "nullable": true},
      {"name": "merchant_or_item", "type": "text", "nullable": true},
      {"name": "amount", "type": "double precision", "nullable": true},
      {"name": "currency", "type": "text", "nullable": false},
      {"name": "date_incurred", "type": "text", "nullable": false},
      {"name": "is_recurring", "type": "boolean", "nullable": false},
      {"name": "confidence", "type": "double precision", "nullable": false},
      {"name": "created_at", "type": "text", "nullable": false},
      {"name": "updated_at", "type": "text", "nullable": false}
    ],
    "notes": [
      "Rows are already filtered to the authenticated household.",
      "Use attributed_family_member for 'spent on/for person' questions.",
      "Use logged_by for 'who logged' audit questions.",
      "Use both category and subcategory when subcategory intent is present.",
      "For free text, search description and merchant_or_item together."
    ]
  }
}
